package net.zonixmc.exploits.check.fly;

import net.zonixmc.exploits.event.PacketReceiveEvent;
import net.minecraft.server.v1_8_R3.PacketPlayInFlying;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;

public class FlyB implements Listener {

    @EventHandler
    void on(PacketReceiveEvent event) {

        if (event.isCancelled() || !(event.getPacket() instanceof PacketPlayInFlying)) return;

        if (!((PacketPlayInFlying) event.getPacket()).g()) return;

        Player player = event.getPlayer();
        double zDiff = Math.abs(player.getLocation().getZ() - ((PacketPlayInFlying) event.getPacket()).c());

        if (zDiff <= 8 || zDiff % 1.0 != 0) return;

        event.setCancelled(true);

    }

}
